<h4 class="modal-title">{{ step.admin.name }}
        <i class="glyphicon glyphicon-info-sign popover-markdown" uib-popover-template="'info-admin'" popover-trigger="'outsideClick'" popover-placement="bottom" popover-class="popover-markdown large"></i>
    </h4>
<span class="text-info">{{ step.admin.description }}</span>
<fieldset>
    <div class="col-xs-12">
        <div class="form-group">
            <label for="identifier">Unique identifier of entity</label>
            <input name="identifier" type="text" name="identifier" class="form-control" ng-model="entity.admin.id" ng-required="!isEditMode()" ng-disabled="show_update">
            <span class="help-inline" ng-show="stepForm.$invalid && stepForm.identifier.$error.required">Identifier is required</span>
        </div>
    </div>
    <div class="col-xs-12 col-md-6">
        <div class="form-group">
            <label for="organization">Organization</label>
            <ui-select name="organization" ng-if="!show_update" tagging="tagTransform" ng-model="entity.organization.selected" theme="bootstrap" allow-clear="true" title="Choose an organization" ng-required="!isEditMode()" on-select="changeChannels($item)" on-remove="removeChannels($item)">
                <ui-select-match placeholder="Choose an organization" allow-clear="true">{{$select.selected.name}}</ui-select-match>
                <ui-select-choices repeat="organization in organizations | filter: $select.search">
                    <span ng-bind-html="organization.name | highlight: $select.search">
                </ui-select-choices>
            </ui-select>
            <span class="help-inline" ng-show="stepForm.$invalid && stepForm.organization.$error.required">Organization is required</span>
                    <input name="organization" type="text" class="form-control" ng-model="entity.organization.selected.name" ng-required="!isEditMode()" ng-if="show_update" ng-disabled="true">
        </div>
    </div>
    <div class="col-xs-12 col-md-6">
        <div class="form-group">
            <label for="channel">Channel</label>
            <ui-select name="channel" ng-if="!show_update" tagging="tagTransform" ng-model="entity.channel.selected" theme="bootstrap" allow-clear="true" ng-required="!isEditMode()" title="Choose a channel">
                <ui-select-match placeholder="Choose a channel" allow-clear="true">{{$select.selected.name}}
                </ui-select-match>
                <ui-select-choices repeat="channel in channels | filter: $select.search">
                    <span ng-bind-html="channel.name | highlight: $select.search">
                </ui-select-choices>
            </ui-select>
                            <span class="help-inline" ng-show="stepForm.$invalid && stepForm.channel.$error.required">Channel is required</span>
                    <input name="channel" type="text" class="form-control" ng-model="entity.channel.selected.name" ng-required="!isEditMode()" ng-if="show_update" ng-disabled="true">
        </div>
    </div>
    <div class="col-xs-12" ng-class="mapViewEnabled? 'col-md-6': 'col-md-12'">
        <div class="form-group">
            <label for="postal">Postal Code (optional)</label>
            <input name="postal" type="text" class="form-control" ng-model="entity.location.postal">
        </div>
        <div class="form-group" ng-click="mapViewEnabled = true">
            <label for="latitude">Latitude (optional)</label>
            <input name="latitude" type="number" class="form-control" ng-model="entity.location.latitude" ng-change="locationChanged()" ng-click="locationChanged()" ng-keypress="locationChanged()" min="-90" max="90" step="0.01" placeholder="Click here to show map" ng-required="!!entity.location.longitude">
        </div>
        <div class="form-group" ng-click="mapViewEnabled = true">
            <label for="longitude">Longitude (optional)</label>
            <input name="longitude" type="number" class="form-control" ng-model="entity.location.longitude" ng-change="locationChanged()" ng-click="locationChanged()" ng-keypress="locationChanged()" min="-180" max="180" step="0.01" placeholder="Click here to show map" ng-required="!!entity.location.latitude">
        </div>
        <a class="btn btn-default ux-txt-success pointer" ng-href="" ng-click="mapViewEnabled = !mapViewEnabled">
                <i class="fa fa-map-marker" aria-hidden="true "></i> Toggle map
            </a>
    </div>
    <div class="col-xs-12 col-md-6 " ng-if="mapViewEnabled ">
        <div class="form-group leaflet-container ">
            <leaflet id="map-marker " lf-center="entity.location.map.center" event-broadcast="entity.location.map.events" markers="entity.location.map.markers" width="100% " height="300px"></leaflet>
        </div>
    </div>
    <wizard-log class="col-xs-12" bar="progressLog"></wizard-log>
</fieldset>
<div ng-include="'src/wizard.footer.client.view.html'"></div>
<script type="text/ng-template" id="info-admin">
    <div btf-markdown ng-include="'doc/wizard/entity/admin-info.md'"></div>
</script>